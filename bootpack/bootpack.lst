     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_io_hlt
     7 00000000                                 	EXTERN	_io_load_eflags
     8 00000000                                 	EXTERN	_io_cli
     9 00000000                                 	EXTERN	_io_out8
    10 00000000                                 	EXTERN	_io_store_eflags
    11 00000000                                 [FILE "bootpack.c"]
    12                                          [SECTION .text]
    13 00000000                                 	GLOBAL	_HariMain
    14 00000000                                 _HariMain:
    15 00000000 55                              	PUSH	EBP
    16 00000001 89 E5                           	MOV	EBP,ESP
    17 00000003 E8 00000064                     	CALL	_init_palette
    18 00000008 6A 78                           	PUSH	120
    19 0000000A 6A 78                           	PUSH	120
    20 0000000C 6A 14                           	PUSH	20
    21 0000000E 6A 14                           	PUSH	20
    22 00000010 6A 01                           	PUSH	1
    23 00000012 68 00000140                     	PUSH	320
    24 00000017 68 000A0000                     	PUSH	655360
    25 0000001C E8 0000025F                     	CALL	_boxfill8
    26 00000021 68 00000096                     	PUSH	150
    27 00000026 68 000000AA                     	PUSH	170
    28 0000002B 6A 32                           	PUSH	50
    29 0000002D 6A 46                           	PUSH	70
    30 0000002F 6A 02                           	PUSH	2
    31 00000031 68 00000140                     	PUSH	320
    32 00000036 68 000A0000                     	PUSH	655360
    33 0000003B E8 00000240                     	CALL	_boxfill8
    34 00000040 83 C4 38                        	ADD	ESP,56
    35 00000043 68 000000B4                     	PUSH	180
    36 00000048 68 000000DC                     	PUSH	220
    37 0000004D 6A 50                           	PUSH	80
    38 0000004F 6A 78                           	PUSH	120
    39 00000051 6A 04                           	PUSH	4
    40 00000053 68 00000140                     	PUSH	320
    41 00000058 68 000A0000                     	PUSH	655360
    42 0000005D E8 0000021E                     	CALL	_boxfill8
    43 00000062 83 C4 1C                        	ADD	ESP,28
    44 00000065                                 L5:
    45 00000065 E8 [00000000]                   	CALL	_io_hlt
    46 0000006A EB F9                           	JMP	L5
    47 0000006C                                 	GLOBAL	_init_palette
    48 0000006C                                 _init_palette:
    49 0000006C 55                              	PUSH	EBP
    50 0000006D 89 E5                           	MOV	EBP,ESP
    51 0000006F 83 EC 10                        	SUB	ESP,16
    52 00000072 66 C7 05 [00000000] 0000        	MOV	WORD [_table_rgb],0
    53 0000007B 66 C7 45 F0 0000                	MOV	WORD [-16+EBP],0
    54 00000081 C6 45 F0 FF                     	MOV	BYTE [-16+EBP],-1
    55 00000085 C6 45 F1 00                     	MOV	BYTE [-15+EBP],0
    56 00000089 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    57 0000008C C6 45 F0 00                     	MOV	BYTE [-16+EBP],0
    58 00000090 C6 45 F1 FF                     	MOV	BYTE [-15+EBP],-1
    59 00000094 66 A3 [00000003]                	MOV	WORD [_table_rgb+3],AX
    60 0000009A 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    61 0000009D C6 45 F0 FF                     	MOV	BYTE [-16+EBP],-1
    62 000000A1 66 A3 [00000006]                	MOV	WORD [_table_rgb+6],AX
    63 000000A7 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    64 000000AA C6 45 F0 00                     	MOV	BYTE [-16+EBP],0
    65 000000AE C6 45 F1 00                     	MOV	BYTE [-15+EBP],0
    66 000000B2 66 A3 [00000009]                	MOV	WORD [_table_rgb+9],AX
    67 000000B8 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    68 000000BB C6 45 F0 FF                     	MOV	BYTE [-16+EBP],-1
    69 000000BF 66 A3 [0000000C]                	MOV	WORD [_table_rgb+12],AX
    70 000000C5 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    71 000000C8 C6 45 F0 00                     	MOV	BYTE [-16+EBP],0
    72 000000CC C6 45 F1 FF                     	MOV	BYTE [-15+EBP],-1
    73 000000D0 66 A3 [0000000F]                	MOV	WORD [_table_rgb+15],AX
    74 000000D6 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    75 000000D9 66 A3 [00000012]                	MOV	WORD [_table_rgb+18],AX
    76 000000DF C6 05 [00000002] 00             	MOV	BYTE [_table_rgb+2],0
    77 000000E6 C6 05 [00000005] 00             	MOV	BYTE [_table_rgb+5],0
    78 000000ED C6 05 [00000008] 00             	MOV	BYTE [_table_rgb+8],0
    79 000000F4 C6 05 [0000000B] 00             	MOV	BYTE [_table_rgb+11],0
    80 000000FB C6 05 [0000000E] FF             	MOV	BYTE [_table_rgb+14],-1
    81 00000102 C6 05 [00000011] FF             	MOV	BYTE [_table_rgb+17],-1
    82 00000109 C6 05 [00000014] FF             	MOV	BYTE [_table_rgb+20],-1
    83 00000110 C6 45 F0 FF                     	MOV	BYTE [-16+EBP],-1
    84 00000114 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    85 00000117 C6 45 F0 C6                     	MOV	BYTE [-16+EBP],-58
    86 0000011B C6 45 F1 C6                     	MOV	BYTE [-15+EBP],-58
    87 0000011F 66 A3 [00000015]                	MOV	WORD [_table_rgb+21],AX
    88 00000125 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    89 00000128 C6 45 F0 84                     	MOV	BYTE [-16+EBP],-124
    90 0000012C C6 45 F1 00                     	MOV	BYTE [-15+EBP],0
    91 00000130 66 A3 [00000018]                	MOV	WORD [_table_rgb+24],AX
    92 00000136 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    93 00000139 C6 45 F0 00                     	MOV	BYTE [-16+EBP],0
    94 0000013D C6 45 F1 84                     	MOV	BYTE [-15+EBP],-124
    95 00000141 66 A3 [0000001B]                	MOV	WORD [_table_rgb+27],AX
    96 00000147 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    97 0000014A C6 45 F0 84                     	MOV	BYTE [-16+EBP],-124
    98 0000014E 66 A3 [0000001E]                	MOV	WORD [_table_rgb+30],AX
    99 00000154 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   100 00000157 C6 45 F0 00                     	MOV	BYTE [-16+EBP],0
   101 0000015B C6 45 F1 00                     	MOV	BYTE [-15+EBP],0
   102 0000015F 66 A3 [00000021]                	MOV	WORD [_table_rgb+33],AX
   103 00000165 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   104 00000168 C6 45 F0 84                     	MOV	BYTE [-16+EBP],-124
   105 0000016C 66 A3 [00000024]                	MOV	WORD [_table_rgb+36],AX
   106 00000172 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   107 00000175 C6 45 F0 00                     	MOV	BYTE [-16+EBP],0
   108 00000179 C6 45 F1 84                     	MOV	BYTE [-15+EBP],-124
   109 0000017D 66 A3 [00000027]                	MOV	WORD [_table_rgb+39],AX
   110 00000183 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   111 00000186 C6 05 [00000017] FF             	MOV	BYTE [_table_rgb+23],-1
   112 0000018D C6 05 [0000001A] C6             	MOV	BYTE [_table_rgb+26],-58
   113 00000194 C6 05 [0000001D] 00             	MOV	BYTE [_table_rgb+29],0
   114 0000019B C6 05 [00000020] 00             	MOV	BYTE [_table_rgb+32],0
   115 000001A2 C6 05 [00000023] 00             	MOV	BYTE [_table_rgb+35],0
   116 000001A9 C6 05 [00000026] 84             	MOV	BYTE [_table_rgb+38],-124
   117 000001B0 C6 05 [00000029] 84             	MOV	BYTE [_table_rgb+41],-124
   118 000001B7 66 A3 [0000002A]                	MOV	WORD [_table_rgb+42],AX
   119 000001BD 68 [00000000]                   	PUSH	_table_rgb
   120 000001C2 C6 45 F0 84                     	MOV	BYTE [-16+EBP],-124
   121 000001C6 6A 0F                           	PUSH	15
   122 000001C8 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   123 000001CB 66 A3 [0000002D]                	MOV	WORD [_table_rgb+45],AX
   124 000001D1 6A 00                           	PUSH	0
   125 000001D3 C6 45 F2 84                     	MOV	BYTE [-14+EBP],-124
   126 000001D7 C6 05 [0000002C] 84             	MOV	BYTE [_table_rgb+44],-124
   127 000001DE C6 05 [0000002F] 84             	MOV	BYTE [_table_rgb+47],-124
   128 000001E5 E8 00000002                     	CALL	_set_palette
   129 000001EA C9                              	LEAVE
   130 000001EB C3                              	RET
   131 000001EC                                 	GLOBAL	_set_palette
   132 000001EC                                 _set_palette:
   133 000001EC 55                              	PUSH	EBP
   134 000001ED 89 E5                           	MOV	EBP,ESP
   135 000001EF 57                              	PUSH	EDI
   136 000001F0 56                              	PUSH	ESI
   137 000001F1 53                              	PUSH	EBX
   138 000001F2 51                              	PUSH	ECX
   139 000001F3 51                              	PUSH	ECX
   140 000001F4 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
   141 000001F7 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   142 000001FA 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   143 000001FD 8B 7D 10                        	MOV	EDI,DWORD [16+EBP]
   144 00000200 89 DE                           	MOV	ESI,EBX
   145 00000202 E8 [00000000]                   	CALL	_io_load_eflags
   146 00000207 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   147 0000020A E8 [00000000]                   	CALL	_io_cli
   148 0000020F 53                              	PUSH	EBX
   149 00000210 68 000003C8                     	PUSH	968
   150 00000215 E8 [00000000]                   	CALL	_io_out8
   151 0000021A 3B 5D F0                        	CMP	EBX,DWORD [-16+EBP]
   152 0000021D 58                              	POP	EAX
   153 0000021E 5A                              	POP	EDX
   154 0000021F 7F 4D                           	JG	L14
   155 00000221 6B DB 03                        	IMUL	EBX,EBX,3
   156 00000224                                 L12:
   157 00000224 8A 04 1F                        	MOV	AL,BYTE [EDI+EBX*1]
   158 00000227 46                              	INC	ESI
   159 00000228 C0 E8 02                        	SHR	AL,2
   160 0000022B 0F B6 C0                        	MOVZX	EAX,AL
   161 0000022E 50                              	PUSH	EAX
   162 0000022F 68 000003C9                     	PUSH	969
   163 00000234 E8 [00000000]                   	CALL	_io_out8
   164 00000239 8A 44 1F 01                     	MOV	AL,BYTE [1+EDI+EBX*1]
   165 0000023D C0 E8 02                        	SHR	AL,2
   166 00000240 0F B6 C0                        	MOVZX	EAX,AL
   167 00000243 50                              	PUSH	EAX
   168 00000244 68 000003C9                     	PUSH	969
   169 00000249 E8 [00000000]                   	CALL	_io_out8
   170 0000024E 8A 44 1F 02                     	MOV	AL,BYTE [2+EDI+EBX*1]
   171 00000252 C0 E8 02                        	SHR	AL,2
   172 00000255 83 C3 03                        	ADD	EBX,3
   173 00000258 0F B6 C0                        	MOVZX	EAX,AL
   174 0000025B 50                              	PUSH	EAX
   175 0000025C 68 000003C9                     	PUSH	969
   176 00000261 E8 [00000000]                   	CALL	_io_out8
   177 00000266 83 C4 18                        	ADD	ESP,24
   178 00000269 3B 75 F0                        	CMP	ESI,DWORD [-16+EBP]
   179 0000026C 7E B6                           	JLE	L12
   180 0000026E                                 L14:
   181 0000026E 8B 45 EC                        	MOV	EAX,DWORD [-20+EBP]
   182 00000271 89 45 08                        	MOV	DWORD [8+EBP],EAX
   183 00000274 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   184 00000277 5B                              	POP	EBX
   185 00000278 5E                              	POP	ESI
   186 00000279 5F                              	POP	EDI
   187 0000027A 5D                              	POP	EBP
   188 0000027B E9 [00000000]                   	JMP	_io_store_eflags
   189 00000280                                 	GLOBAL	_boxfill8
   190 00000280                                 _boxfill8:
   191 00000280 55                              	PUSH	EBP
   192 00000281 89 E5                           	MOV	EBP,ESP
   193 00000283 57                              	PUSH	EDI
   194 00000284 56                              	PUSH	ESI
   195 00000285 53                              	PUSH	EBX
   196 00000286 57                              	PUSH	EDI
   197 00000287 57                              	PUSH	EDI
   198 00000288 8A 45 10                        	MOV	AL,BYTE [16+EBP]
   199 0000028B 8B 4D 18                        	MOV	ECX,DWORD [24+EBP]
   200 0000028E 8B 7D 1C                        	MOV	EDI,DWORD [28+EBP]
   201 00000291 88 45 F3                        	MOV	BYTE [-13+EBP],AL
   202 00000294 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   203 00000297 7F 31                           	JG	L27
   204 00000299 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   205 0000029C 0F AF D9                        	IMUL	EBX,ECX
   206 0000029F                                 L25:
   207 0000029F 8B 55 14                        	MOV	EDX,DWORD [20+EBP]
   208 000002A2 39 FA                           	CMP	EDX,EDI
   209 000002A4 7F 1B                           	JG	L29
   210 000002A6 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
   211 000002A9 01 DE                           	ADD	ESI,EBX
   212 000002AB 01 D6                           	ADD	ESI,EDX
   213 000002AD 89 75 EC                        	MOV	DWORD [-20+EBP],ESI
   214 000002B0                                 L24:
   215 000002B0 8B 75 EC                        	MOV	ESI,DWORD [-20+EBP]
   216 000002B3 8A 45 F3                        	MOV	AL,BYTE [-13+EBP]
   217 000002B6 42                              	INC	EDX
   218 000002B7 88 06                           	MOV	BYTE [ESI],AL
   219 000002B9 46                              	INC	ESI
   220 000002BA 89 75 EC                        	MOV	DWORD [-20+EBP],ESI
   221 000002BD 39 FA                           	CMP	EDX,EDI
   222 000002BF 7E EF                           	JLE	L24
   223 000002C1                                 L29:
   224 000002C1 41                              	INC	ECX
   225 000002C2 03 5D 0C                        	ADD	EBX,DWORD [12+EBP]
   226 000002C5 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   227 000002C8 7E D5                           	JLE	L25
   228 000002CA                                 L27:
   229 000002CA 5B                              	POP	EBX
   230 000002CB 5E                              	POP	ESI
   231 000002CC 5B                              	POP	EBX
   232 000002CD 5E                              	POP	ESI
   233 000002CE 5F                              	POP	EDI
   234 000002CF 5D                              	POP	EBP
   235 000002D0 C3                              	RET
   236 000002D1                                 	GLOBAL	_table_rgb
   237                                          [SECTION .data]
   238 00000000                                 	ALIGNB	16
   239 00000000                                 _table_rgb:
   240 00000000 00 00 00 00 00 00 00 00 00 00   	RESB	48
       0000000A 00 00 00 00 00 00 00 00 00 00 
       00000014 00 00 00 00 00 00 00 00 00 00 
       0000001E 00 00 00 00 00 00 00 00 00 00 
       00000028 00 00 00 00 00 00 00 00 
