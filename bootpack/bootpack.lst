     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_io_hlt
     7 00000000                                 	EXTERN	_io_load_eflags
     8 00000000                                 	EXTERN	_io_cli
     9 00000000                                 	EXTERN	_io_out8
    10 00000000                                 	EXTERN	_io_store_eflags
    11 00000000                                 [FILE "bootpack.c"]
    12                                          [SECTION .text]
    13 00000000                                 	GLOBAL	_HariMain
    14 00000000                                 _HariMain:
    15 00000000 55                              	PUSH	EBP
    16 00000001 89 E5                           	MOV	EBP,ESP
    17 00000003 E8 000001EF                     	CALL	_init_palette
    18 00000008 68 000000AB                     	PUSH	171
    19 0000000D 68 0000013F                     	PUSH	319
    20 00000012 6A 00                           	PUSH	0
    21 00000014 6A 00                           	PUSH	0
    22 00000016 6A 0E                           	PUSH	14
    23 00000018 68 00000140                     	PUSH	320
    24 0000001D 68 000A0000                     	PUSH	655360
    25 00000022 E8 000003E4                     	CALL	_boxfill8
    26 00000027 68 000000AC                     	PUSH	172
    27 0000002C 68 0000013F                     	PUSH	319
    28 00000031 68 000000AC                     	PUSH	172
    29 00000036 6A 00                           	PUSH	0
    30 00000038 6A 08                           	PUSH	8
    31 0000003A 68 00000140                     	PUSH	320
    32 0000003F 68 000A0000                     	PUSH	655360
    33 00000044 E8 000003C2                     	CALL	_boxfill8
    34 00000049 83 C4 38                        	ADD	ESP,56
    35 0000004C 68 000000AD                     	PUSH	173
    36 00000051 68 0000013F                     	PUSH	319
    37 00000056 68 000000AD                     	PUSH	173
    38 0000005B 6A 00                           	PUSH	0
    39 0000005D 6A 07                           	PUSH	7
    40 0000005F 68 00000140                     	PUSH	320
    41 00000064 68 000A0000                     	PUSH	655360
    42 00000069 E8 0000039D                     	CALL	_boxfill8
    43 0000006E 68 000000C7                     	PUSH	199
    44 00000073 68 0000013F                     	PUSH	319
    45 00000078 68 000000AE                     	PUSH	174
    46 0000007D 6A 00                           	PUSH	0
    47 0000007F 6A 08                           	PUSH	8
    48 00000081 68 00000140                     	PUSH	320
    49 00000086 68 000A0000                     	PUSH	655360
    50 0000008B E8 0000037B                     	CALL	_boxfill8
    51 00000090 83 C4 38                        	ADD	ESP,56
    52 00000093 68 000000B0                     	PUSH	176
    53 00000098 6A 3B                           	PUSH	59
    54 0000009A 68 000000B0                     	PUSH	176
    55 0000009F 6A 03                           	PUSH	3
    56 000000A1 6A 07                           	PUSH	7
    57 000000A3 68 00000140                     	PUSH	320
    58 000000A8 68 000A0000                     	PUSH	655360
    59 000000AD E8 00000359                     	CALL	_boxfill8
    60 000000B2 68 000000C4                     	PUSH	196
    61 000000B7 6A 02                           	PUSH	2
    62 000000B9 68 000000B0                     	PUSH	176
    63 000000BE 6A 02                           	PUSH	2
    64 000000C0 6A 07                           	PUSH	7
    65 000000C2 68 00000140                     	PUSH	320
    66 000000C7 68 000A0000                     	PUSH	655360
    67 000000CC E8 0000033A                     	CALL	_boxfill8
    68 000000D1 83 C4 38                        	ADD	ESP,56
    69 000000D4 68 000000C4                     	PUSH	196
    70 000000D9 6A 3B                           	PUSH	59
    71 000000DB 68 000000C4                     	PUSH	196
    72 000000E0 6A 03                           	PUSH	3
    73 000000E2 6A 0F                           	PUSH	15
    74 000000E4 68 00000140                     	PUSH	320
    75 000000E9 68 000A0000                     	PUSH	655360
    76 000000EE E8 00000318                     	CALL	_boxfill8
    77 000000F3 68 000000C3                     	PUSH	195
    78 000000F8 6A 3B                           	PUSH	59
    79 000000FA 68 000000B1                     	PUSH	177
    80 000000FF 6A 3B                           	PUSH	59
    81 00000101 6A 0F                           	PUSH	15
    82 00000103 68 00000140                     	PUSH	320
    83 00000108 68 000A0000                     	PUSH	655360
    84 0000010D E8 000002F9                     	CALL	_boxfill8
    85 00000112 83 C4 38                        	ADD	ESP,56
    86 00000115 68 000000C5                     	PUSH	197
    87 0000011A 6A 3B                           	PUSH	59
    88 0000011C 68 000000C5                     	PUSH	197
    89 00000121 6A 02                           	PUSH	2
    90 00000123 6A 00                           	PUSH	0
    91 00000125 68 00000140                     	PUSH	320
    92 0000012A 68 000A0000                     	PUSH	655360
    93 0000012F E8 000002D7                     	CALL	_boxfill8
    94 00000134 68 000000C5                     	PUSH	197
    95 00000139 6A 3C                           	PUSH	60
    96 0000013B 68 000000B0                     	PUSH	176
    97 00000140 6A 3C                           	PUSH	60
    98 00000142 6A 00                           	PUSH	0
    99 00000144 68 00000140                     	PUSH	320
   100 00000149 68 000A0000                     	PUSH	655360
   101 0000014E E8 000002B8                     	CALL	_boxfill8
   102 00000153 83 C4 38                        	ADD	ESP,56
   103 00000156 68 000000B0                     	PUSH	176
   104 0000015B 68 0000013C                     	PUSH	316
   105 00000160 68 000000B0                     	PUSH	176
   106 00000165 68 00000111                     	PUSH	273
   107 0000016A 6A 0F                           	PUSH	15
   108 0000016C 68 00000140                     	PUSH	320
   109 00000171 68 000A0000                     	PUSH	655360
   110 00000176 E8 00000290                     	CALL	_boxfill8
   111 0000017B 68 000000C4                     	PUSH	196
   112 00000180 68 00000111                     	PUSH	273
   113 00000185 68 000000B1                     	PUSH	177
   114 0000018A 68 00000111                     	PUSH	273
   115 0000018F 6A 0F                           	PUSH	15
   116 00000191 68 00000140                     	PUSH	320
   117 00000196 68 000A0000                     	PUSH	655360
   118 0000019B E8 0000026B                     	CALL	_boxfill8
   119 000001A0 83 C4 38                        	ADD	ESP,56
   120 000001A3 68 000000C5                     	PUSH	197
   121 000001A8 68 0000013C                     	PUSH	316
   122 000001AD 68 000000C5                     	PUSH	197
   123 000001B2 68 00000111                     	PUSH	273
   124 000001B7 6A 07                           	PUSH	7
   125 000001B9 68 00000140                     	PUSH	320
   126 000001BE 68 000A0000                     	PUSH	655360
   127 000001C3 E8 00000243                     	CALL	_boxfill8
   128 000001C8 68 000000C5                     	PUSH	197
   129 000001CD 68 0000013D                     	PUSH	317
   130 000001D2 68 000000B0                     	PUSH	176
   131 000001D7 68 0000013D                     	PUSH	317
   132 000001DC 6A 07                           	PUSH	7
   133 000001DE 68 00000140                     	PUSH	320
   134 000001E3 68 000A0000                     	PUSH	655360
   135 000001E8 E8 0000021E                     	CALL	_boxfill8
   136 000001ED 83 C4 38                        	ADD	ESP,56
   137 000001F0                                 L5:
   138 000001F0 E8 [00000000]                   	CALL	_io_hlt
   139 000001F5 EB F9                           	JMP	L5
   140 000001F7                                 	GLOBAL	_init_palette
   141 000001F7                                 _init_palette:
   142 000001F7 55                              	PUSH	EBP
   143 000001F8 89 E5                           	MOV	EBP,ESP
   144 000001FA 83 EC 10                        	SUB	ESP,16
   145 000001FD 66 C7 05 [00000000] 0000        	MOV	WORD [_table_rgb],0
   146 00000206 66 C7 45 F0 0000                	MOV	WORD [-16+EBP],0
   147 0000020C C6 45 F0 FF                     	MOV	BYTE [-16+EBP],-1
   148 00000210 C6 45 F1 00                     	MOV	BYTE [-15+EBP],0
   149 00000214 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   150 00000217 C6 45 F0 00                     	MOV	BYTE [-16+EBP],0
   151 0000021B C6 45 F1 FF                     	MOV	BYTE [-15+EBP],-1
   152 0000021F 66 A3 [00000003]                	MOV	WORD [_table_rgb+3],AX
   153 00000225 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   154 00000228 C6 45 F0 FF                     	MOV	BYTE [-16+EBP],-1
   155 0000022C 66 A3 [00000006]                	MOV	WORD [_table_rgb+6],AX
   156 00000232 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   157 00000235 C6 45 F0 00                     	MOV	BYTE [-16+EBP],0
   158 00000239 C6 45 F1 00                     	MOV	BYTE [-15+EBP],0
   159 0000023D 66 A3 [00000009]                	MOV	WORD [_table_rgb+9],AX
   160 00000243 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   161 00000246 C6 45 F0 FF                     	MOV	BYTE [-16+EBP],-1
   162 0000024A 66 A3 [0000000C]                	MOV	WORD [_table_rgb+12],AX
   163 00000250 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   164 00000253 C6 45 F0 00                     	MOV	BYTE [-16+EBP],0
   165 00000257 C6 45 F1 FF                     	MOV	BYTE [-15+EBP],-1
   166 0000025B 66 A3 [0000000F]                	MOV	WORD [_table_rgb+15],AX
   167 00000261 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   168 00000264 66 A3 [00000012]                	MOV	WORD [_table_rgb+18],AX
   169 0000026A C6 05 [00000002] 00             	MOV	BYTE [_table_rgb+2],0
   170 00000271 C6 05 [00000005] 00             	MOV	BYTE [_table_rgb+5],0
   171 00000278 C6 05 [00000008] 00             	MOV	BYTE [_table_rgb+8],0
   172 0000027F C6 05 [0000000B] 00             	MOV	BYTE [_table_rgb+11],0
   173 00000286 C6 05 [0000000E] FF             	MOV	BYTE [_table_rgb+14],-1
   174 0000028D C6 05 [00000011] FF             	MOV	BYTE [_table_rgb+17],-1
   175 00000294 C6 05 [00000014] FF             	MOV	BYTE [_table_rgb+20],-1
   176 0000029B C6 45 F0 FF                     	MOV	BYTE [-16+EBP],-1
   177 0000029F 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   178 000002A2 C6 45 F0 C6                     	MOV	BYTE [-16+EBP],-58
   179 000002A6 C6 45 F1 C6                     	MOV	BYTE [-15+EBP],-58
   180 000002AA 66 A3 [00000015]                	MOV	WORD [_table_rgb+21],AX
   181 000002B0 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   182 000002B3 C6 45 F0 84                     	MOV	BYTE [-16+EBP],-124
   183 000002B7 C6 45 F1 00                     	MOV	BYTE [-15+EBP],0
   184 000002BB 66 A3 [00000018]                	MOV	WORD [_table_rgb+24],AX
   185 000002C1 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   186 000002C4 C6 45 F0 00                     	MOV	BYTE [-16+EBP],0
   187 000002C8 C6 45 F1 84                     	MOV	BYTE [-15+EBP],-124
   188 000002CC 66 A3 [0000001B]                	MOV	WORD [_table_rgb+27],AX
   189 000002D2 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   190 000002D5 C6 45 F0 84                     	MOV	BYTE [-16+EBP],-124
   191 000002D9 66 A3 [0000001E]                	MOV	WORD [_table_rgb+30],AX
   192 000002DF 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   193 000002E2 C6 45 F0 00                     	MOV	BYTE [-16+EBP],0
   194 000002E6 C6 45 F1 00                     	MOV	BYTE [-15+EBP],0
   195 000002EA 66 A3 [00000021]                	MOV	WORD [_table_rgb+33],AX
   196 000002F0 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   197 000002F3 C6 45 F0 84                     	MOV	BYTE [-16+EBP],-124
   198 000002F7 66 A3 [00000024]                	MOV	WORD [_table_rgb+36],AX
   199 000002FD 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   200 00000300 C6 45 F0 00                     	MOV	BYTE [-16+EBP],0
   201 00000304 C6 45 F1 84                     	MOV	BYTE [-15+EBP],-124
   202 00000308 66 A3 [00000027]                	MOV	WORD [_table_rgb+39],AX
   203 0000030E 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   204 00000311 C6 05 [00000017] FF             	MOV	BYTE [_table_rgb+23],-1
   205 00000318 C6 05 [0000001A] C6             	MOV	BYTE [_table_rgb+26],-58
   206 0000031F C6 05 [0000001D] 00             	MOV	BYTE [_table_rgb+29],0
   207 00000326 C6 05 [00000020] 00             	MOV	BYTE [_table_rgb+32],0
   208 0000032D C6 05 [00000023] 00             	MOV	BYTE [_table_rgb+35],0
   209 00000334 C6 05 [00000026] 84             	MOV	BYTE [_table_rgb+38],-124
   210 0000033B C6 05 [00000029] 84             	MOV	BYTE [_table_rgb+41],-124
   211 00000342 66 A3 [0000002A]                	MOV	WORD [_table_rgb+42],AX
   212 00000348 68 [00000000]                   	PUSH	_table_rgb
   213 0000034D C6 45 F0 84                     	MOV	BYTE [-16+EBP],-124
   214 00000351 6A 0F                           	PUSH	15
   215 00000353 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   216 00000356 66 A3 [0000002D]                	MOV	WORD [_table_rgb+45],AX
   217 0000035C 6A 00                           	PUSH	0
   218 0000035E C6 45 F2 84                     	MOV	BYTE [-14+EBP],-124
   219 00000362 C6 05 [0000002C] 84             	MOV	BYTE [_table_rgb+44],-124
   220 00000369 C6 05 [0000002F] 84             	MOV	BYTE [_table_rgb+47],-124
   221 00000370 E8 00000002                     	CALL	_set_palette
   222 00000375 C9                              	LEAVE
   223 00000376 C3                              	RET
   224 00000377                                 	GLOBAL	_set_palette
   225 00000377                                 _set_palette:
   226 00000377 55                              	PUSH	EBP
   227 00000378 89 E5                           	MOV	EBP,ESP
   228 0000037A 57                              	PUSH	EDI
   229 0000037B 56                              	PUSH	ESI
   230 0000037C 53                              	PUSH	EBX
   231 0000037D 51                              	PUSH	ECX
   232 0000037E 51                              	PUSH	ECX
   233 0000037F 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
   234 00000382 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   235 00000385 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   236 00000388 8B 7D 10                        	MOV	EDI,DWORD [16+EBP]
   237 0000038B 89 DE                           	MOV	ESI,EBX
   238 0000038D E8 [00000000]                   	CALL	_io_load_eflags
   239 00000392 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   240 00000395 E8 [00000000]                   	CALL	_io_cli
   241 0000039A 53                              	PUSH	EBX
   242 0000039B 68 000003C8                     	PUSH	968
   243 000003A0 E8 [00000000]                   	CALL	_io_out8
   244 000003A5 3B 5D F0                        	CMP	EBX,DWORD [-16+EBP]
   245 000003A8 58                              	POP	EAX
   246 000003A9 5A                              	POP	EDX
   247 000003AA 7F 4D                           	JG	L14
   248 000003AC 6B DB 03                        	IMUL	EBX,EBX,3
   249 000003AF                                 L12:
   250 000003AF 8A 04 1F                        	MOV	AL,BYTE [EDI+EBX*1]
   251 000003B2 46                              	INC	ESI
   252 000003B3 C0 E8 02                        	SHR	AL,2
   253 000003B6 0F B6 C0                        	MOVZX	EAX,AL
   254 000003B9 50                              	PUSH	EAX
   255 000003BA 68 000003C9                     	PUSH	969
   256 000003BF E8 [00000000]                   	CALL	_io_out8
   257 000003C4 8A 44 1F 01                     	MOV	AL,BYTE [1+EDI+EBX*1]
   258 000003C8 C0 E8 02                        	SHR	AL,2
   259 000003CB 0F B6 C0                        	MOVZX	EAX,AL
   260 000003CE 50                              	PUSH	EAX
   261 000003CF 68 000003C9                     	PUSH	969
   262 000003D4 E8 [00000000]                   	CALL	_io_out8
   263 000003D9 8A 44 1F 02                     	MOV	AL,BYTE [2+EDI+EBX*1]
   264 000003DD C0 E8 02                        	SHR	AL,2
   265 000003E0 83 C3 03                        	ADD	EBX,3
   266 000003E3 0F B6 C0                        	MOVZX	EAX,AL
   267 000003E6 50                              	PUSH	EAX
   268 000003E7 68 000003C9                     	PUSH	969
   269 000003EC E8 [00000000]                   	CALL	_io_out8
   270 000003F1 83 C4 18                        	ADD	ESP,24
   271 000003F4 3B 75 F0                        	CMP	ESI,DWORD [-16+EBP]
   272 000003F7 7E B6                           	JLE	L12
   273 000003F9                                 L14:
   274 000003F9 8B 45 EC                        	MOV	EAX,DWORD [-20+EBP]
   275 000003FC 89 45 08                        	MOV	DWORD [8+EBP],EAX
   276 000003FF 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   277 00000402 5B                              	POP	EBX
   278 00000403 5E                              	POP	ESI
   279 00000404 5F                              	POP	EDI
   280 00000405 5D                              	POP	EBP
   281 00000406 E9 [00000000]                   	JMP	_io_store_eflags
   282 0000040B                                 	GLOBAL	_boxfill8
   283 0000040B                                 _boxfill8:
   284 0000040B 55                              	PUSH	EBP
   285 0000040C 89 E5                           	MOV	EBP,ESP
   286 0000040E 57                              	PUSH	EDI
   287 0000040F 56                              	PUSH	ESI
   288 00000410 53                              	PUSH	EBX
   289 00000411 57                              	PUSH	EDI
   290 00000412 57                              	PUSH	EDI
   291 00000413 8A 45 10                        	MOV	AL,BYTE [16+EBP]
   292 00000416 8B 4D 18                        	MOV	ECX,DWORD [24+EBP]
   293 00000419 8B 7D 1C                        	MOV	EDI,DWORD [28+EBP]
   294 0000041C 88 45 F3                        	MOV	BYTE [-13+EBP],AL
   295 0000041F 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   296 00000422 7F 31                           	JG	L27
   297 00000424 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   298 00000427 0F AF D9                        	IMUL	EBX,ECX
   299 0000042A                                 L25:
   300 0000042A 8B 55 14                        	MOV	EDX,DWORD [20+EBP]
   301 0000042D 39 FA                           	CMP	EDX,EDI
   302 0000042F 7F 1B                           	JG	L29
   303 00000431 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
   304 00000434 01 DE                           	ADD	ESI,EBX
   305 00000436 01 D6                           	ADD	ESI,EDX
   306 00000438 89 75 EC                        	MOV	DWORD [-20+EBP],ESI
   307 0000043B                                 L24:
   308 0000043B 8B 75 EC                        	MOV	ESI,DWORD [-20+EBP]
   309 0000043E 8A 45 F3                        	MOV	AL,BYTE [-13+EBP]
   310 00000441 42                              	INC	EDX
   311 00000442 88 06                           	MOV	BYTE [ESI],AL
   312 00000444 46                              	INC	ESI
   313 00000445 89 75 EC                        	MOV	DWORD [-20+EBP],ESI
   314 00000448 39 FA                           	CMP	EDX,EDI
   315 0000044A 7E EF                           	JLE	L24
   316 0000044C                                 L29:
   317 0000044C 41                              	INC	ECX
   318 0000044D 03 5D 0C                        	ADD	EBX,DWORD [12+EBP]
   319 00000450 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   320 00000453 7E D5                           	JLE	L25
   321 00000455                                 L27:
   322 00000455 5B                              	POP	EBX
   323 00000456 5E                              	POP	ESI
   324 00000457 5B                              	POP	EBX
   325 00000458 5E                              	POP	ESI
   326 00000459 5F                              	POP	EDI
   327 0000045A 5D                              	POP	EBP
   328 0000045B C3                              	RET
   329 0000045C                                 	GLOBAL	_table_rgb
   330                                          [SECTION .data]
   331 00000000                                 	ALIGNB	16
   332 00000000                                 _table_rgb:
   333 00000000 00 00 00 00 00 00 00 00 00 00   	RESB	48
       0000000A 00 00 00 00 00 00 00 00 00 00 
       00000014 00 00 00 00 00 00 00 00 00 00 
       0000001E 00 00 00 00 00 00 00 00 00 00 
       00000028 00 00 00 00 00 00 00 00 
