     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_io_hlt
     7 00000000                                 	EXTERN	_io_load_eflags
     8 00000000                                 	EXTERN	_io_cli
     9 00000000                                 	EXTERN	_io_out8
    10 00000000                                 	EXTERN	_io_store_eflags
    11 00000000                                 [FILE "bootpack.c"]
    12                                          [SECTION .text]
    13 00000000                                 	GLOBAL	_HariMain
    14 00000000                                 _HariMain:
    15 00000000 55                              	PUSH	EBP
    16 00000001 89 E5                           	MOV	EBP,ESP
    17 00000003 53                              	PUSH	EBX
    18 00000004 50                              	PUSH	EAX
    19 00000005 E8 00000024                     	CALL	_init_palette
    20 0000000A 31 C9                           	XOR	ECX,ECX
    21 0000000C                                 L6:
    22 0000000C 89 C8                           	MOV	EAX,ECX
    23 0000000E BA 00000040                     	MOV	EDX,64
    24 00000013 89 D3                           	MOV	EBX,EDX
    25 00000015 99                              	CDQ
    26 00000016 F7 FB                           	IDIV	EBX
    27 00000018 88 91 000A0000                  	MOV	BYTE [655360+ECX],DL
    28 0000001E 41                              	INC	ECX
    29 0000001F 81 F9 0000FFFF                  	CMP	ECX,65535
    30 00000025 7E E5                           	JLE	L6
    31 00000027                                 L10:
    32 00000027 E8 [00000000]                   	CALL	_io_hlt
    33 0000002C EB F9                           	JMP	L10
    34 0000002E                                 	GLOBAL	_init_palette
    35 0000002E                                 _init_palette:
    36 0000002E 55                              	PUSH	EBP
    37 0000002F 89 E5                           	MOV	EBP,ESP
    38 00000031 83 EC 10                        	SUB	ESP,16
    39 00000034 66 C7 05 [00000000] 0000        	MOV	WORD [_table_rgb],0
    40 0000003D 66 C7 45 F0 0000                	MOV	WORD [-16+EBP],0
    41 00000043 C6 45 F0 FF                     	MOV	BYTE [-16+EBP],-1
    42 00000047 C6 45 F1 00                     	MOV	BYTE [-15+EBP],0
    43 0000004B 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    44 0000004E C6 45 F0 00                     	MOV	BYTE [-16+EBP],0
    45 00000052 C6 45 F1 FF                     	MOV	BYTE [-15+EBP],-1
    46 00000056 66 A3 [00000003]                	MOV	WORD [_table_rgb+3],AX
    47 0000005C 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    48 0000005F C6 45 F0 FF                     	MOV	BYTE [-16+EBP],-1
    49 00000063 66 A3 [00000006]                	MOV	WORD [_table_rgb+6],AX
    50 00000069 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    51 0000006C C6 45 F0 00                     	MOV	BYTE [-16+EBP],0
    52 00000070 C6 45 F1 00                     	MOV	BYTE [-15+EBP],0
    53 00000074 66 A3 [00000009]                	MOV	WORD [_table_rgb+9],AX
    54 0000007A 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    55 0000007D C6 45 F0 FF                     	MOV	BYTE [-16+EBP],-1
    56 00000081 66 A3 [0000000C]                	MOV	WORD [_table_rgb+12],AX
    57 00000087 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    58 0000008A C6 45 F0 00                     	MOV	BYTE [-16+EBP],0
    59 0000008E C6 45 F1 FF                     	MOV	BYTE [-15+EBP],-1
    60 00000092 66 A3 [0000000F]                	MOV	WORD [_table_rgb+15],AX
    61 00000098 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    62 0000009B 66 A3 [00000012]                	MOV	WORD [_table_rgb+18],AX
    63 000000A1 C6 05 [00000002] 00             	MOV	BYTE [_table_rgb+2],0
    64 000000A8 C6 05 [00000005] 00             	MOV	BYTE [_table_rgb+5],0
    65 000000AF C6 05 [00000008] 00             	MOV	BYTE [_table_rgb+8],0
    66 000000B6 C6 05 [0000000B] 00             	MOV	BYTE [_table_rgb+11],0
    67 000000BD C6 05 [0000000E] FF             	MOV	BYTE [_table_rgb+14],-1
    68 000000C4 C6 05 [00000011] FF             	MOV	BYTE [_table_rgb+17],-1
    69 000000CB C6 05 [00000014] FF             	MOV	BYTE [_table_rgb+20],-1
    70 000000D2 C6 45 F0 FF                     	MOV	BYTE [-16+EBP],-1
    71 000000D6 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    72 000000D9 C6 45 F0 C6                     	MOV	BYTE [-16+EBP],-58
    73 000000DD C6 45 F1 C6                     	MOV	BYTE [-15+EBP],-58
    74 000000E1 66 A3 [00000015]                	MOV	WORD [_table_rgb+21],AX
    75 000000E7 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    76 000000EA C6 45 F0 84                     	MOV	BYTE [-16+EBP],-124
    77 000000EE C6 45 F1 00                     	MOV	BYTE [-15+EBP],0
    78 000000F2 66 A3 [00000018]                	MOV	WORD [_table_rgb+24],AX
    79 000000F8 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    80 000000FB C6 45 F0 00                     	MOV	BYTE [-16+EBP],0
    81 000000FF C6 45 F1 84                     	MOV	BYTE [-15+EBP],-124
    82 00000103 66 A3 [0000001B]                	MOV	WORD [_table_rgb+27],AX
    83 00000109 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    84 0000010C C6 45 F0 84                     	MOV	BYTE [-16+EBP],-124
    85 00000110 66 A3 [0000001E]                	MOV	WORD [_table_rgb+30],AX
    86 00000116 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    87 00000119 C6 45 F0 00                     	MOV	BYTE [-16+EBP],0
    88 0000011D C6 45 F1 00                     	MOV	BYTE [-15+EBP],0
    89 00000121 66 A3 [00000021]                	MOV	WORD [_table_rgb+33],AX
    90 00000127 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    91 0000012A C6 45 F0 84                     	MOV	BYTE [-16+EBP],-124
    92 0000012E 66 A3 [00000024]                	MOV	WORD [_table_rgb+36],AX
    93 00000134 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    94 00000137 C6 45 F0 00                     	MOV	BYTE [-16+EBP],0
    95 0000013B C6 45 F1 84                     	MOV	BYTE [-15+EBP],-124
    96 0000013F 66 A3 [00000027]                	MOV	WORD [_table_rgb+39],AX
    97 00000145 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
    98 00000148 C6 05 [00000017] FF             	MOV	BYTE [_table_rgb+23],-1
    99 0000014F C6 05 [0000001A] C6             	MOV	BYTE [_table_rgb+26],-58
   100 00000156 C6 05 [0000001D] 00             	MOV	BYTE [_table_rgb+29],0
   101 0000015D C6 05 [00000020] 00             	MOV	BYTE [_table_rgb+32],0
   102 00000164 C6 05 [00000023] 00             	MOV	BYTE [_table_rgb+35],0
   103 0000016B C6 05 [00000026] 84             	MOV	BYTE [_table_rgb+38],-124
   104 00000172 C6 05 [00000029] 84             	MOV	BYTE [_table_rgb+41],-124
   105 00000179 66 A3 [0000002A]                	MOV	WORD [_table_rgb+42],AX
   106 0000017F 68 [00000000]                   	PUSH	_table_rgb
   107 00000184 C6 45 F0 84                     	MOV	BYTE [-16+EBP],-124
   108 00000188 6A 0F                           	PUSH	15
   109 0000018A 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   110 0000018D 66 A3 [0000002D]                	MOV	WORD [_table_rgb+45],AX
   111 00000193 6A 00                           	PUSH	0
   112 00000195 C6 45 F2 84                     	MOV	BYTE [-14+EBP],-124
   113 00000199 C6 05 [0000002C] 84             	MOV	BYTE [_table_rgb+44],-124
   114 000001A0 C6 05 [0000002F] 84             	MOV	BYTE [_table_rgb+47],-124
   115 000001A7 E8 00000002                     	CALL	_set_palette
   116 000001AC C9                              	LEAVE
   117 000001AD C3                              	RET
   118 000001AE                                 	GLOBAL	_set_palette
   119 000001AE                                 _set_palette:
   120 000001AE 55                              	PUSH	EBP
   121 000001AF 89 E5                           	MOV	EBP,ESP
   122 000001B1 57                              	PUSH	EDI
   123 000001B2 56                              	PUSH	ESI
   124 000001B3 53                              	PUSH	EBX
   125 000001B4 53                              	PUSH	EBX
   126 000001B5 53                              	PUSH	EBX
   127 000001B6 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
   128 000001B9 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   129 000001BC 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   130 000001BF 8B 7D 10                        	MOV	EDI,DWORD [16+EBP]
   131 000001C2 89 DE                           	MOV	ESI,EBX
   132 000001C4 E8 [00000000]                   	CALL	_io_load_eflags
   133 000001C9 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   134 000001CC E8 [00000000]                   	CALL	_io_cli
   135 000001D1 53                              	PUSH	EBX
   136 000001D2 68 000003C8                     	PUSH	968
   137 000001D7 E8 [00000000]                   	CALL	_io_out8
   138 000001DC 3B 5D F0                        	CMP	EBX,DWORD [-16+EBP]
   139 000001DF 5A                              	POP	EDX
   140 000001E0 59                              	POP	ECX
   141 000001E1 7F 4D                           	JG	L20
   142 000001E3 6B DB 03                        	IMUL	EBX,EBX,3
   143 000001E6                                 L18:
   144 000001E6 8A 04 1F                        	MOV	AL,BYTE [EDI+EBX*1]
   145 000001E9 46                              	INC	ESI
   146 000001EA C0 E8 02                        	SHR	AL,2
   147 000001ED 0F B6 C0                        	MOVZX	EAX,AL
   148 000001F0 50                              	PUSH	EAX
   149 000001F1 68 000003C9                     	PUSH	969
   150 000001F6 E8 [00000000]                   	CALL	_io_out8
   151 000001FB 8A 44 1F 01                     	MOV	AL,BYTE [1+EDI+EBX*1]
   152 000001FF C0 E8 02                        	SHR	AL,2
   153 00000202 0F B6 C0                        	MOVZX	EAX,AL
   154 00000205 50                              	PUSH	EAX
   155 00000206 68 000003C9                     	PUSH	969
   156 0000020B E8 [00000000]                   	CALL	_io_out8
   157 00000210 8A 44 1F 02                     	MOV	AL,BYTE [2+EDI+EBX*1]
   158 00000214 C0 E8 02                        	SHR	AL,2
   159 00000217 83 C3 03                        	ADD	EBX,3
   160 0000021A 0F B6 C0                        	MOVZX	EAX,AL
   161 0000021D 50                              	PUSH	EAX
   162 0000021E 68 000003C9                     	PUSH	969
   163 00000223 E8 [00000000]                   	CALL	_io_out8
   164 00000228 83 C4 18                        	ADD	ESP,24
   165 0000022B 3B 75 F0                        	CMP	ESI,DWORD [-16+EBP]
   166 0000022E 7E B6                           	JLE	L18
   167 00000230                                 L20:
   168 00000230 8B 45 EC                        	MOV	EAX,DWORD [-20+EBP]
   169 00000233 89 45 08                        	MOV	DWORD [8+EBP],EAX
   170 00000236 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   171 00000239 5B                              	POP	EBX
   172 0000023A 5E                              	POP	ESI
   173 0000023B 5F                              	POP	EDI
   174 0000023C 5D                              	POP	EBP
   175 0000023D E9 [00000000]                   	JMP	_io_store_eflags
   176 00000242                                 	GLOBAL	_table_rgb
   177                                          [SECTION .data]
   178 00000000                                 	ALIGNB	16
   179 00000000                                 _table_rgb:
   180 00000000 00 00 00 00 00 00 00 00 00 00   	RESB	48
       0000000A 00 00 00 00 00 00 00 00 00 00 
       00000014 00 00 00 00 00 00 00 00 00 00 
       0000001E 00 00 00 00 00 00 00 00 00 00 
       00000028 00 00 00 00 00 00 00 00 
